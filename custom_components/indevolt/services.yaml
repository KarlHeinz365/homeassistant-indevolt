# Describes the services for the indevolt integration

set_realtime_mode:
  name: Set Real-Time Mode
  description: >
    Puts the device into real-time control mode (Mode 4).
    This mode is required for manual charge/discharge power control.
  fields:
    device_id:
      name: Device
      description: The device to control.
      required: false
      selector:
        device:
          integration: indevolt

set_self_consumption_mode:
  name: Set Self-Consumption Mode
  description: >
    Sets the device to "Self-consumed Prioritized" (Mode 1).
    Optimizes for local solar consumption.
  fields:
    device_id:
      name: Device
      description: The device to control.
      required: false
      selector:
        device:
          integration: indevolt

set_schedule_mode:
  name: Set Schedule Mode
  description: >
    Sets the device to "Charge/Discharge Schedule" (Mode 2).
    Follows internal timer settings configured in the device app.
  fields:
    device_id:
      name: Device
      description: The device to control.
      required: false
      selector:
        device:
          integration: indevolt

charge:
  name: Charge Battery
  description: >
    Start charging. Note: Device must be in Real-time mode (Mode 4) first.
  fields:
    power:
      name: Power
      description: Charging power in Watts.
      required: true
      selector:
        number:
          min: 0
          max: 2000
          unit_of_measurement: "W"
    soc_limit:
      name: SOC Limit
      description: Stop at this % SOC.
      required: false
      default: 100
      selector:
        number:
          min: 0
          max: 100
          unit_of_measurement: "%"
    device_id:
      name: Device
      description: The device to control.
      required: false
      selector:
        device:
          integration: indevolt

discharge:
  name: Discharge Battery
  description: >
    Start discharging. Note: Device must be in Real-time mode (Mode 4) first.
  fields:
    power:
      name: Power
      description: Discharging power in Watts.
      required: true
      selector:
        number:
          min: 0
          max: 2000
          unit_of_measurement: "W"
    soc_limit:
      name: SOC Limit
      description: Stop at this % SOC.
      required: false
      default: 5
      selector:
        number:
          min: 0
          max: 100
          unit_of_measurement: "%"
    device_id:
      name: Device
      description: The device to control.
      required: false
      selector:
        device:
          integration: indevolt

stop:
  name: Stop Battery
  description: Puts the battery into standby mode (Mode 0).
  fields:
    device_id:
      name: Device
      description: The device to control.
      required: false
      selector:
        device:
          integration: indevolt
